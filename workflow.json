{
  "name": "jrnl rag",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours",
              "hoursInterval": 12
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -208,
        544
      ],
      "id": "4ecfa0bb-981a-46a9-88a9-d80ee61660cf",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "fileSelector": "/notes/*/*.txt",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        112,
        544
      ],
      "id": "d8d9b5ae-aa22-4387-8f7b-537f3ee4ef7d",
      "name": "Read/Write Files from Disk"
    },
    {
      "parameters": {
        "jsonMode": "expressionData",
        "jsonData": "={{ $json.data || $json.text || $json.concatenated_data }}",
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "=file_id",
                "value": "={{ $('Set File ID').first().json.file_id }}"
              }
            ]
          }
        }
      },
      "id": "7361aef3-5249-4618-aa20-fde3c50ca888",
      "name": "Default Data Loader",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1,
      "position": [
        720,
        720
      ]
    },
    {
      "parameters": {
        "name": "user_documents",
        "description": "Contains all the user's documents that you can check for context to answer user questions."
      },
      "id": "80588a0d-ba40-4fd7-b359-dc2cbee8709b",
      "name": "Retrieve Documents",
      "type": "@n8n/n8n-nodes-langchain.toolVectorStore",
      "typeVersion": 1,
      "position": [
        1024,
        -48
      ]
    },
    {
      "parameters": {
        "operation": "text",
        "options": {}
      },
      "id": "6fb07daa-05df-4721-9ab7-55ce6c6c0b51",
      "name": "Extract Document Text",
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        416,
        544
      ],
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "c72daa80-fa2f-441d-b103-992e492261bf",
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        608,
        -96
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9a9a245e-f1a1-4282-bb02-a81ffe629f0f",
              "name": "chatInput",
              "value": "={{ $json?.chatInput || $json.body.chatInput }}",
              "type": "string"
            },
            {
              "id": "b80831d8-c653-4203-8706-adedfdb98f77",
              "name": "sessionId",
              "value": "={{ $json?.sessionId || $json.body.sessionId}}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "6b7e46ba-fe30-4e50-8fa7-e746964cd92d",
      "name": "Edit Fields",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        96,
        -32
      ]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "llm-visi-dash",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "6311fd93-6754-4f24-8fd8-5843a64ef804",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -176,
        256
      ],
      "webhookId": "9ba11544-5c4e-4f91-818a-08a4ecb596c5"
    },
    {
      "parameters": {},
      "id": "9f95dbdc-f940-4f4d-b382-9b10eac6a4ec",
      "name": "Character Text Splitter",
      "type": "@n8n/n8n-nodes-langchain.textSplitterCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        720,
        880
      ]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.chatInput }}",
        "options": {
          "systemMessage": "You are a data analysis consultant for Launchpad Philly. Your ONLY job is to suggest what data should be explored and analyzed. You MUST NOT generate any SQL queries, code, or technical implementations.\n\nCRITICAL RULES:\n- NEVER write SQL queries\n- NEVER show code blocks\n- NEVER mention technical database operations\n- ONLY suggest data exploration approaches in plain English\n- Always respond in markdown format\n- Focus on WHAT to explore, not HOW to implement it\n\nWhen users ask questions, respond with natural language suggestions about what data to look at and why it matters. Use bullet points and clear headings.\n\nExample response format:\n## Key Questions to Explore\n- What is the overall attendance rate?\n- How does attendance vary by student group?\n- What patterns exist in attendance over time?\n\n## Why This Matters\n- Understanding attendance helps identify engagement issues\n- Patterns can reveal scheduling or support needs\n- Correlations with outcomes show program effectiveness"
        }
      },
      "id": "d3f3c13a-4444-4f6d-8e41-b39810ffc6b9",
      "name": "RAG AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.6,
      "position": [
        320,
        -32
      ]
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        352,
        208
      ],
      "id": "ed843f19-16a1-48f6-955c-7914fbb698a8",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        192,
        192
      ],
      "id": "adcec285-c704-4f0f-8fa5-f19f2961f0c5",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "iETZx5AXmAfmoimO",
          "name": "antonioarcher8"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1248,
        96
      ],
      "id": "169caac6-6a80-4298-8d11-80f4f1dcf215",
      "name": "Google Gemini Chat Model1",
      "credentials": {
        "googlePalmApi": {
          "id": "kaSrnWXYj2FZHceF",
          "name": "Personal Gemini"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.embeddingsGoogleGemini",
      "typeVersion": 1,
      "position": [
        992,
        272
      ],
      "id": "bd835235-c5a4-4321-8ff5-ae1f11399832",
      "name": "Embeddings Google Gemini",
      "credentials": {
        "googlePalmApi": {
          "id": "kaSrnWXYj2FZHceF",
          "name": "Personal Gemini"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.embeddingsGoogleGemini",
      "typeVersion": 1,
      "position": [
        528,
        800
      ],
      "id": "f90acf35-ff25-454f-bc54-b7f73bc899e0",
      "name": "Embeddings Google Gemini1",
      "credentials": {
        "googlePalmApi": {
          "id": "kaSrnWXYj2FZHceF",
          "name": "Personal Gemini"
        }
      }
    },
    {
      "parameters": {
        "mode": "insert",
        "qdrantCollection": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "embeddingBatchSize": 1700,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.3,
      "position": [
        640,
        544
      ],
      "id": "34f127e2-48ae-4217-a1ca-05b5e3ff93bd",
      "name": "Qdrant Vector Store",
      "credentials": {
        "qdrantApi": {
          "id": "WL7U1G3peh1Gfn7x",
          "name": "QdrantApi account"
        }
      }
    },
    {
      "parameters": {
        "qdrantCollection": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.3,
      "position": [
        880,
        128
      ],
      "id": "90fdea62-aab6-40a0-8900-c5e52c5d2d2d",
      "name": "Qdrant Retrivial",
      "credentials": {
        "qdrantApi": {
          "id": "WL7U1G3peh1Gfn7x",
          "name": "QdrantApi account"
        }
      }
    },
    {
      "parameters": {
        "public": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        -192,
        -16
      ],
      "id": "0ecbe64d-490d-42f8-b294-eb906bb90136",
      "name": "When chat message received",
      "webhookId": "10b14bff-01e2-4939-b484-a401e219eb2e"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours",
              "hoursInterval": 12
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -1552,
        80
      ],
      "id": "bc3a261a-1c3d-49bc-9faf-13ab2807e6de",
      "name": "Schedule Trigger1"
    },
    {
      "parameters": {
        "name": "user_documents",
        "description": "Contains all the user's documents that you can check for context to answer user questions."
      },
      "id": "0c13a6b5-22c2-404a-96ac-213754ce3d83",
      "name": "Retrieve Documents1",
      "type": "@n8n/n8n-nodes-langchain.toolVectorStore",
      "typeVersion": 1,
      "position": [
        -832,
        144
      ]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.chatInput }}",
        "options": {
          "systemMessage": "You are a data analysis consultant for Launchpad Philly. Your ONLY job is to suggest what data should be explored and analyzed. You MUST NOT generate any SQL queries, code, or technical implementations.\n\nCRITICAL RULES:\n- NEVER write SQL queries\n- NEVER show code blocks\n- NEVER mention technical database operations\n- ONLY suggest data exploration approaches in plain English\n- Always respond in markdown format\n- Focus on WHAT to explore, not HOW to implement it\n\nWhen users ask questions, respond with natural language suggestions about what data to look at and why it matters. Use bullet points and clear headings.\n\nExample response format:\n## Key Questions to Explore\n- What is the overall attendance rate?\n- How does attendance vary by student group?\n- What patterns exist in attendance over time?\n\n## Why This Matters\n- Understanding attendance helps identify engagement issues\n- Patterns can reveal scheduling or support needs\n- Correlations with outcomes show program effectiveness"
        }
      },
      "id": "a2ff74b5-d89b-455c-a963-a8c53a0e1aaf",
      "name": "RAG AI Agent1",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.6,
      "position": [
        -1216,
        64
      ]
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        -1200,
        288
      ],
      "id": "447d4f52-ebc9-4ca5-b953-18123b903773",
      "name": "Simple Memory1"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -1344,
        272
      ],
      "id": "d0d09b31-f527-459d-99b2-a300d20d2f92",
      "name": "Google Gemini Chat Model2",
      "credentials": {
        "googlePalmApi": {
          "id": "iETZx5AXmAfmoimO",
          "name": "antonioarcher8"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -608,
        288
      ],
      "id": "8140f5ad-f0b1-47fd-a4bb-fd1bdb4c6a90",
      "name": "Google Gemini Chat Model3",
      "credentials": {
        "googlePalmApi": {
          "id": "kaSrnWXYj2FZHceF",
          "name": "Personal Gemini"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.embeddingsGoogleGemini",
      "typeVersion": 1,
      "position": [
        -864,
        464
      ],
      "id": "f36f1f6a-4afa-4e2b-87d3-5862457b7832",
      "name": "Embeddings Google Gemini2",
      "credentials": {
        "googlePalmApi": {
          "id": "kaSrnWXYj2FZHceF",
          "name": "Personal Gemini"
        }
      }
    },
    {
      "parameters": {
        "qdrantCollection": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.3,
      "position": [
        -976,
        320
      ],
      "id": "343659df-58e6-4f9b-80f7-ea2c27531eb0",
      "name": "Qdrant Retrivial1",
      "credentials": {
        "qdrantApi": {
          "id": "WL7U1G3peh1Gfn7x",
          "name": "QdrantApi account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "webhook",
        "options": {}
      },
      "type": "n8n-nodes-base.discord",
      "typeVersion": 2,
      "position": [
        -880,
        -64
      ],
      "id": "9fdd4df6-6824-4698-a15f-d4990a66a8d1",
      "name": "Discord",
      "webhookId": "12a967bb-c70b-4116-a99d-9a674b1bb7bc"
    },
    {
      "parameters": {
        "content": "## Human interaction\n### Must be interacted with manually by a human\n",
        "height": 592,
        "width": 1808
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -368,
        -176
      ],
      "typeVersion": 1,
      "id": "195427b6-23be-4aeb-a871-d76a2c702c8f",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "# Automated messages,\n## At the given time it will send me messages with what needs to be done",
        "height": 800,
        "width": 1392
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1760,
        -176
      ],
      "typeVersion": 1,
      "id": "3f09d216-e8ce-45c0-8fd5-808cda2243d7",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "# Helper Function\n## adds data into vector database",
        "height": 592,
        "width": 1424,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -368,
        416
      ],
      "typeVersion": 1,
      "id": "de6e5061-3d5e-4113-aa65-09f76f3ec294",
      "name": "Sticky Note2"
    }
  ],
  "pinData": {},
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Qdrant Vector Store",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Retrieve Documents": {
      "ai_tool": [
        [
          {
            "node": "RAG AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Extract Document Text": {
      "main": [
        [
          {
            "node": "Qdrant Vector Store",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "RAG AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Character Text Splitter": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "RAG AI Agent": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "RAG AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "RAG AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Retrieve Documents",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Google Gemini": {
      "ai_embedding": [
        [
          {
            "node": "Qdrant Retrivial",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Google Gemini1": {
      "ai_embedding": [
        [
          {
            "node": "Qdrant Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Qdrant Retrivial": {
      "ai_vectorStore": [
        [
          {
            "node": "Retrieve Documents",
            "type": "ai_vectorStore",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk": {
      "main": [
        [
          {
            "node": "Extract Document Text",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Retrieve Documents1": {
      "ai_tool": [
        [
          {
            "node": "RAG AI Agent1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory1": {
      "ai_memory": [
        [
          {
            "node": "RAG AI Agent1",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "RAG AI Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "Retrieve Documents1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Google Gemini2": {
      "ai_embedding": [
        [
          {
            "node": "Qdrant Retrivial1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Qdrant Retrivial1": {
      "ai_vectorStore": [
        [
          {
            "node": "Retrieve Documents1",
            "type": "ai_vectorStore",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger1": {
      "main": [
        [
          {
            "node": "RAG AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RAG AI Agent1": {
      "main": [
        [
          {
            "node": "Discord",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "fc59c145-7f12-40c4-992a-96c4f9116ffe",
  "meta": {
    "instanceId": "b050f7dbf3e122a4a6e6508608274db6a9818a5a6ef990d902489da0af28b459"
  },
  "id": "YBOIMpLInGYVWtpA",
  "tags": []
}
